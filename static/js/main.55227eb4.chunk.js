(this.webpackJsonpGesichtsmaskenerkennung=this.webpackJsonpGesichtsmaskenerkennung||[]).push([[0],{175:function(e){e.exports=JSON.parse('["with mask","mask weared incorrect","without mask"]')},326:function(e,t){},327:function(e,t){},335:function(e,t){},336:function(e,t){},337:function(e,t){},338:function(e,t){},339:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){"use strict";n.r(t);var a=n(68),c=n.n(a),r=n(256),i=n(7),s=n(11),o=n(4),l=n(52),u=(n(168),n(231)),d=(n(339),n(43)),f=function(e){return Object(d.jsxs)("div",Object(u.a)(Object(u.a)({className:"wrapper"},e),{},{children:[Object(d.jsx)("div",{className:"spinner"}),Object(d.jsx)("p",{children:e.children})]}))},h=n(6),j=n(5),b=Object(h.a)((function e(){Object(j.a)(this,e),this.open=function(e){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(t){e.srcObject=t})):alert("Can't open Webcam!")},this.close=function(e){e.srcObject?(e.srcObject.getTracks().forEach((function(e){e.stop()})),e.srcObject=null):alert("Please open Webcam first!")}})),p=function(e){var t=e.imageRef,n=e.cameraRef,c=e.videoRef,r=Object(a.useState)(null),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(a.useRef)(null),f=Object(a.useRef)(null),h=new b,j=function(){var e=t.current.src;t.current.src="#",URL.revokeObjectURL(e),l(null),u.current.value="",t.current.style.display="none"},p=function(){var e=c.current.src;c.current.src="",URL.revokeObjectURL(e),l(null),f.current.value="",c.current.style.display="none"};return Object(d.jsxs)("div",{className:"btn-container",children:[Object(d.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var n=URL.createObjectURL(e.target.files[0]);t.current.src=n,t.current.style.display="block",l("image")},ref:u}),Object(d.jsxs)("button",{onClick:function(){null===s?u.current.click():"image"===s?j():alert("Can't handle more than 1 stream\nCurrently streaming : ".concat(s))},children:["image"===s?"Close":"Open"," Image"]}),Object(d.jsx)("input",{type:"file",accept:"video/*",style:{display:"none"},onChange:function(e){"image"===s&&j();var t=URL.createObjectURL(e.target.files[0]);c.current.src=t,c.current.addEventListener("ended",(function(){return p()})),c.current.style.display="block",l("video")},ref:f}),Object(d.jsxs)("button",{onClick:function(){null===s||"image"===s?f.current.click():"video"===s?p():alert("Can't handle more than 1 stream\nCurrently streaming : ".concat(s))},children:["video"===s?"Close":"Open"," Video"]}),Object(d.jsxs)("button",{onClick:function(){null===s||"image"===s?("image"===s&&j(),h.open(n.current),n.current.style.display="block",l("camera")):"camera"===s?(h.close(n.current),n.current.style.display="none",l(null)):alert("Can't handle more than 1 stream\nCurrently streaming : ".concat(s))},children:["camera"===s?"Close":"Open"," Webcam"]})]})},m=n(175),v=function(e,t,n,a,c){var r=e.getContext("2d");r.clearRect(0,0,r.canvas.width,r.canvas.height);var i=new O,s="".concat(Math.max(Math.round(Math.max(r.canvas.width,r.canvas.height)/40),14),"px Arial");r.font=s,r.textBaseline="top";for(var l=0;l<n.length;++l){m[a[l]];var u=i.get(a[l]),d=((100*n[l]).toFixed(1),t.slice(4*l,4*(l+1))),f=Object(o.a)(d,4),h=f[0],j=f[1],b=f[2],p=f[3];j*=c[0],p*=c[0],h*=c[1];var v=p-j,g=(b*=c[1])-h;r.fillStyle=O.hexToRgba(u,.2),r.fillRect(j,h,v,g),r.strokeStyle=u,r.lineWidth=Math.max(Math.min(r.canvas.width,r.canvas.height)/200,2.5),r.strokeRect(j,h,v,g)}for(var x=[{name:"with mask",color:"#344593"},{name:"mask weared incorrect",color:"#48F90A"},{name:"without mask",color:"#FF701F"}],y={},k=0,R=x;k<R.length;k++){y[R[k].name]=0}for(var w=0;w<a.length;++w){var F=m[a[w]];y.hasOwnProperty(F)&&y[F]++}r.font="bold 16px Arial",r.textBaseline="middle";for(var C=0,S=31*x.length,M=0,L=x;M<L.length;M++){var A=L[M],B="".concat(A.name,"  ").concat(y[A.name]),U=r.measureText(B).width;C=Math.max(C,U)}var D=C+20+15;r.fillStyle="rgba(255,255,255,0.8)",r.fillRect(10,10,D,S);for(var N=0,P=0,I=x;P<I.length;P++){var E=I[P],T=E.color;r.fillStyle=T;var W=10+N+5.5;r.fillRect(10,W,20,20),r.fillStyle="#000000";var G=10+N+15.5;r.fillText("".concat(E.name," : ").concat(y[E.name]),35,G),N+=31}},O=Object(h.a)((function e(){var t=this;Object(j.a)(this,e),this.get=function(e){return t.palette[Math.floor(e)%t.n]},this.palette=["#344593","#48F90A","#FF701F","#FFB21D","#CFD231","#48F90A","#92CC17","#3DDB86","#1A9334","#00D4BB","#2C99A8","#00C2FF","#344593","#6473FF","#0018EC","#8438FF","#520085","#CB38FF","#FF95C8","#FF37C7"],this.n=this.palette.length}));O.hexToRgba=function(e,t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgba(".concat([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)].join(", "),", ").concat(t,")"):null};var g=m.length,x=function(e,t,n){var a,c;return[l.l((function(){var r=l.b.fromPixels(e),i=r.shape.slice(0,2),s=Object(o.a)(i,2),u=s[0],d=s[1],f=Math.max(d,u),h=r.pad([[0,f-u],[0,f-d],[0,0]]);return a=f/d,c=f/u,l.g.resizeBilinear(h,[t,n]).div(255).expandDims(0)})),a,c]},y=function(){var e=Object(s.a)(Object(i.a)().mark((function e(t,n,a){var c,r,s,u,d,f,h,j,b,p,m,O,y,k,R,w,F,C,S,M,L,A=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=A.length>3&&void 0!==A[3]?A[3]:function(){},r=n.inputShape.slice(1,3),s=Object(o.a)(r,2),u=s[0],d=s[1],l.f().startScope(),f=x(t,u,d),h=Object(o.a)(f,3),j=h[0],b=h[1],p=h[2],m=n.net.execute(j),O=m.transpose([0,2,1]),y=l.l((function(){var e=O.slice([0,0,2],[-1,-1,1]),t=O.slice([0,0,3],[-1,-1,1]),n=l.k(O.slice([0,0,0],[-1,-1,1]),l.e(e,2)),a=l.k(O.slice([0,0,1],[-1,-1,1]),l.e(t,2));return l.c([a,n,l.a(a,t),l.a(n,e)],2).squeeze()})),k=l.l((function(){var e=O.slice([0,0,4],[-1,-1,g]).squeeze(0);return[e.max(1),e.argMax(1)]})),R=Object(o.a)(k,2),w=R[0],F=R[1],e.next=10,l.g.nonMaxSuppressionAsync(y,w,500,.45,.2);case 10:C=e.sent,S=y.gather(C,0).dataSync(),M=w.gather(C,0).dataSync(),L=F.gather(C,0).dataSync(),v(a,S,M,L,[b,p]),l.d([m,O,y,w,F,C]),c(),l.f().endScope();case 18:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(e,t,n){var a=function(){var c=Object(s.a)(Object(i.a)().mark((function c(){var r;return Object(i.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(0!==e.videoWidth||null!==e.srcObject){c.next=4;break}return(r=n.getContext("2d")).clearRect(0,0,r.canvas.width,r.canvas.height),c.abrupt("return");case 4:y(e,t,n,(function(){requestAnimationFrame(a)}));case 5:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();a()},R=(n(341),function(){var e=Object(a.useState)({loading:!0,progress:0}),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({net:null,inputShape:[1,0,0,3]}),u=Object(o.a)(r,2),h=u[0],j=u[1],b=Object(a.useRef)(null),m=Object(a.useRef)(null),v=Object(a.useRef)(null),O=Object(a.useRef)(null),g="yolov8n_FaceMask";return Object(a.useEffect)((function(){l.j().then(Object(s.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.h("".concat(window.location.href,"/").concat(g,"_web_model/model.json"),{onProgress:function(e){c({loading:!0,progress:e})}});case 2:t=e.sent,n=l.i(t.inputs[0].shape),a=t.execute(n),c({loading:!1,progress:1}),j({net:t,inputShape:t.inputs[0].shape}),l.d([a,n]);case 8:case"end":return e.stop()}}),e)}))))}),[]),Object(d.jsxs)("div",{className:"App",children:[n.loading&&Object(d.jsxs)(f,{children:["Loading model... ",(100*n.progress).toFixed(2),"%"]}),Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("h1",{children:"\ud83d\ude37 Gesichtsmaskenerkennung"}),Object(d.jsx)("p",{children:"KI-Gesichtsmaskenerkennung direkt in  Browser"}),Object(d.jsxs)("p",{children:["Serving : ",Object(d.jsx)("code",{className:"code",children:g})]})]}),Object(d.jsxs)("div",{className:"content",children:[Object(d.jsx)("img",{src:"#",ref:b,onLoad:function(){return y(b.current,h,O.current)}}),Object(d.jsx)("video",{autoPlay:!0,muted:!0,ref:m,onPlay:function(){return k(m.current,h,O.current)}}),Object(d.jsx)("video",{autoPlay:!0,muted:!0,ref:v,onPlay:function(){return k(v.current,h,O.current)}}),Object(d.jsx)("canvas",{width:h.inputShape[1],height:h.inputShape[2],ref:O})]}),Object(d.jsx)(p,{imageRef:b,cameraRef:m,videoRef:v})]})});n(342);Object(r.createRoot)(document.getElementById("root")).render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(R,{})}))}},[[343,1,2]]]);
//# sourceMappingURL=main.55227eb4.chunk.js.map