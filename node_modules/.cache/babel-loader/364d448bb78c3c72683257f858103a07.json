{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\flori\\\\Documents\\\\PythonProjekt\\\\FaceMaskDetection\\\\yolov8n_facemask-tfjs\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport \"@tensorflow/tfjs-backend-webgl\"; // set backend to webgl\nimport Loader from \"./components/loader\";\nimport ButtonHandler from \"./components/btn-handler\";\nimport { detect, detectVideo } from \"./utils/detect\";\nimport \"./style/App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [loading, setLoading] = useState({\n    loading: true,\n    progress: 0\n  }); // loading state\n  const [model, setModel] = useState({\n    net: null,\n    inputShape: [1, 0, 0, 3]\n  }); // init model & input shape\n\n  // references\n  const imageRef = useRef(null);\n  const cameraRef = useRef(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // model configs\n  const modelName = \"yolov8n_FaceMask\";\n  useEffect(() => {\n    tf.ready().then(async () => {\n      const yolov8 = await tf.loadGraphModel(`${window.location.href}/${modelName}_web_model/model.json`, {\n        onProgress: fractions => {\n          setLoading({\n            loading: true,\n            progress: fractions\n          }); // set loading fractions\n        }\n      }); // load model\n\n      // warming up model\n      const dummyInput = tf.ones(yolov8.inputs[0].shape);\n      const warmupResults = yolov8.execute(dummyInput);\n      setLoading({\n        loading: false,\n        progress: 1\n      });\n      setModel({\n        net: yolov8,\n        inputShape: yolov8.inputs[0].shape\n      }); // set model & input shape\n\n      tf.dispose([warmupResults, dummyInput]); // cleanup memory\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [loading.loading && /*#__PURE__*/_jsxDEV(Loader, {\n      children: [\"Loading model... \", (loading.progress * 100).toFixed(2), \"%\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDE37 Gesichtsmaskenerkennung\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"KI-Gesichtsmaskenerkennung direkt in  Browser\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Serving : \", /*#__PURE__*/_jsxDEV(\"code\", {\n          className: \"code\",\n          children: modelName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"#\",\n        ref: imageRef,\n        onLoad: () => detect(imageRef.current, model, canvasRef.current)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        autoPlay: true,\n        muted: true,\n        ref: cameraRef,\n        onPlay: () => detectVideo(cameraRef.current, model, canvasRef.current)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        autoPlay: true,\n        muted: true,\n        ref: videoRef,\n        onPlay: () => detectVideo(videoRef.current, model, canvasRef.current)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        width: model.inputShape[1],\n        height: model.inputShape[2],\n        ref: canvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonHandler, {\n      imageRef: imageRef,\n      cameraRef: cameraRef,\n      videoRef: videoRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"Z5rXosP8h6dkHOu21FKrJuRQ+Jk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","tf","Loader","ButtonHandler","detect","detectVideo","jsxDEV","_jsxDEV","App","_s","loading","setLoading","progress","model","setModel","net","inputShape","imageRef","cameraRef","videoRef","canvasRef","modelName","ready","then","yolov8","loadGraphModel","window","location","href","onProgress","fractions","dummyInput","ones","inputs","shape","warmupResults","execute","dispose","className","children","toFixed","fileName","_jsxFileName","lineNumber","columnNumber","src","ref","onLoad","current","autoPlay","muted","onPlay","width","height","_c","$RefreshReg$"],"sources":["C:/Users/flori/Documents/PythonProjekt/FaceMaskDetection/yolov8n_facemask-tfjs/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport \"@tensorflow/tfjs-backend-webgl\"; // set backend to webgl\nimport Loader from \"./components/loader\";\nimport ButtonHandler from \"./components/btn-handler\";\nimport { detect, detectVideo } from \"./utils/detect\";\nimport \"./style/App.css\";\n\nconst App = () => {\n  const [loading, setLoading] = useState({ loading: true, progress: 0 }); // loading state\n  const [model, setModel] = useState({\n    net: null,\n    inputShape: [1, 0, 0, 3],\n  }); // init model & input shape\n\n  // references\n  const imageRef = useRef(null);\n  const cameraRef = useRef(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // model configs\n  const modelName = \"yolov8n_FaceMask\";\n\n  useEffect(() => {\n    tf.ready().then(async () => {\n      const yolov8 = await tf.loadGraphModel(\n        `${window.location.href}/${modelName}_web_model/model.json`,\n        {\n          onProgress: (fractions) => {\n            setLoading({ loading: true, progress: fractions }); // set loading fractions\n          },\n        }\n      ); // load model\n\n      // warming up model\n      const dummyInput = tf.ones(yolov8.inputs[0].shape);\n      const warmupResults = yolov8.execute(dummyInput);\n\n      setLoading({ loading: false, progress: 1 });\n      setModel({\n        net: yolov8,\n        inputShape: yolov8.inputs[0].shape,\n      }); // set model & input shape\n\n      tf.dispose([warmupResults, dummyInput]); // cleanup memory\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {loading.loading && <Loader>Loading model... {(loading.progress * 100).toFixed(2)}%</Loader>}\n      <div className=\"header\">\n        <h1>ðŸ˜· Gesichtsmaskenerkennung</h1>\n        <p>\n          KI-Gesichtsmaskenerkennung direkt in  Browser \n        </p>\n        <p>\n          Serving : <code className=\"code\">{modelName}</code>\n        </p>\n      </div>\n\n      <div className=\"content\">\n        <img\n          src=\"#\"\n          ref={imageRef}\n          onLoad={() => detect(imageRef.current, model, canvasRef.current)}\n        />\n        <video\n          autoPlay\n          muted\n          ref={cameraRef}\n          onPlay={() => detectVideo(cameraRef.current, model, canvasRef.current)}\n        />\n        <video\n          autoPlay\n          muted\n          ref={videoRef}\n          onPlay={() => detectVideo(videoRef.current, model, canvasRef.current)}\n        />\n        <canvas width={model.inputShape[1]} height={model.inputShape[2]} ref={canvasRef} />\n      </div>\n\n      <ButtonHandler imageRef={imageRef} cameraRef={cameraRef} videoRef={videoRef} />\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}